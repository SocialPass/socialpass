{% extends "bases/base_secondary.html" %}

{% load account crispy_forms_tags %}

{% block head_title %}Create Team - SocialPass{% endblock %}

{% block inner %}
{% with request.user.membership_set.all as memberships %}
	{% if memberships.count > 0 %}
		<p class="mb-5">
			<a href="{% url 'dashboard_organizer:dashboard_redirect' %}" class="fw-bold"><i class="fa-regular fa-arrow-left me-5"></i> Back to dashboard</a>
		</p>
		<h1 class="fsr-3 text-strong fw-700 mt-0">Create Team</h1>
	{% else %}
		<h1 class="fsr-3 text-strong fw-700">Create Team</h1>
	{% endif %}
{% endwith %}
<p>
	Use the form below to create your very own team and get started with SocialPass.
</p>

<!-- Form start -->
<form method="POST" enctype="multipart/form-data">
	{% csrf_token %}

	{% if form.non_field_errors %}
		<div class="alert alert-danger text-danger px-15 py-10 subpixel-antialiased" role="alert">
			<ul class="unordered-list bullet-reset m-0">
				{% for error in form.non_field_errors %}
					<li>{{ error|escape }}</li>
				{% endfor %}
			</ul>
		</div>
	{% endif %}

	{% for input in form.hidden_fields %}
		{{ input }}
	{% endfor %}

	{% for input in form.visible_fields %}
		<div class="form-group">
			{% if input.name == "name" %}
				<label class="form-label" for="{{ input.id_for_label }}">{{ input.label }}</label>
				<input
					type="{{ input.field.widget.input_type }}"
					name="{{ input.name }}"
					value="{{ input.value|default_if_none:'' }}"
					{% if input.field.widget.input_type != "hidden" %}
						class="form-control {% if input.errors %}is-invalid{% endif %}"
						id="{{ input.auto_id }}"
					{% endif %}
					{% if input.field.required %}
						required="required"
					{% endif %}
					{% for k,v in input.field.widget.attrs.items %}
						{{ k }}="{{ v }}"
					{% endfor %}
					autofocus="true"
				/>
			{% elif input.name == "description" %}
				<label class="form-label" for="{{ input.id_for_label }}">{{ input.label }}</label>
				<textarea
					name="{{ input.name }}"
					{% if input.field.widget.input_type != "hidden" %}
						class="form-control {% if input.errors %}is-invalid{% endif %}"
						id="{{ input.auto_id }}"
					{% endif %}
					{% if input.field.required %}
						required="required"
					{% endif %}
					{% for k,v in input.field.widget.attrs.items %}
						{{ k }}="{{ v }}"
					{% endfor %}
					>{% if input.value %}{{ input.value }}{% endif %}</textarea>
			{% elif input.name == "image" %}
				{{ input|as_crispy_field }}
			{% endif %}

			{% if input.errors %}
				<ul class="unordered-list bullet-reset mt-5 text-danger subpixel-antialiased">
					{% for error in input.errors %}
						<li>{{ error }}</li>
					{% endfor %}
				</ul>
			{% endif %}
		</div>
	{% endfor %}
	<div class="form-group">
		<button class="btn btn-primary btn-block" type="submit">Create Team</button>
	</div>
</form>
<!-- Form end -->

<p class="text-muted fs-base-n2 pt-10 border-top border-dotted border-bottom-0 border-start-0 border-end-0">
	Please <a href="#" data-hm-toggle="modal" data-hm-target="discord-support-ticket-modal" class="fw-bold" target="_blank">contact us</a> and let us know if you have any trouble creating your team.
</p>
{% endblock %}

