{% extends "checkout/base.html" %}
{% load static get_theme_value %}

{% block head_title %}{{ event.title }} - {% get_theme_value "brand_name" %}{% endblock head_title %}

{% block content %}
<!-- Header start -->
<div class="w-100 hs-200 position-relative">
	<!-- Event cover image start -->
	<div class="d-flex align-items-center justify-content-center w-100 h-100 bg-gray-very-light-lm bg-darkgray-very-dim-dm overflow-hidden pe-none">
		<img src="{{ event.cover_image.url }}" class="w-100 h-auto" alt="Cover image">
	</div>
	<!-- Event cover image end -->

	<!-- Team image start -->
	<div class="position-absolute z-1 top-100 start-50 translate-middle px-content">
		<div class="ws-75 hs-75 rounded-circle border border-5 border-blend d-flex align-items-center justify-content-center overflow-hidden">
			<img src="{{ event.team.image.url }}" class="d-block w-100 h-auto" alt="Team image">
		</div>
	</div>
	<!-- Team image end -->
</div>
<!-- Header end -->

<!-- Team name start -->
<div class="px-content pt-40 text-center">
	<p class="text-muted mt-5 mb-0">
		Hosted By
	</p>
	<h6 class="text-strong fs-base fw-700 m-0">
		{{ event.team.name }}
		{% if event.team.is_verified %}<i class="fa-solid fa-badge-check text-primary ms-5"></i>{% endif %}
	</h6>
</div>
<!-- Team name end -->

<div class="row">
	<!-- Title and description start -->
	<div class="col-md-7">
		<div class="content mt-20 mb-0">
			<h1 class="text-strong fw-700 display-6 m-0 text-break">{{ event.title }}</h1>
			<div id="desc-cont" class="my-20 overflow-hidden position-relative max-h-250">
				{{ event.description_html | safe }}
				<div id="desc-read" class="d-none position-absolute bottom-0 start-0 w-100 text-center pb-10">
					<button 
						type="button"
						class="btn btn-rounded"
						onclick="(function(){
							document.getElementById('desc-cont').classList.remove('overflow-hidden');
							document.getElementById('desc-cont').classList.remove('max-h-250');
							document.getElementById('desc-read').classList.add('d-none');
							return false;
						})();return false;"
					>
						Read More
					</button>
				</div>
			</div>
		</div>
	</div>
	<!-- Title and description end -->

	<!-- Date and location start -->
	<div class="col-md-5">
		<div class="content pt-10 pt-md-30 my-0 position-md-sticky top-0 start-0">
			<div class="d-flex align-items-center">
				<div class="ws-25 flex-shrink-0">
					<i class="fa-light fa-calendars"></i>
				</div>
				<div class="fw-bold">
					Date &mdash; {{ event.timezone }}
				</div>
			</div>
			<p class="text-muted mt-5 mb-0">
				<strong class="text-base">Start:</strong> {{ event.start_date }}
			</p>
			{% if event.end_date %}
				<p class="text-muted mt-5 mb-0">
					<strong class="text-base">End:</strong> {{ event.end_date }}
				</p>
			{% endif %}
			<div class="d-flex align-items-center mt-15">
				<div class="ws-25 flex-shrink-0">
					<i class="fa-light fa-location-dot"></i>
				</div>
				<div class="fw-bold">Location</div>
			</div>
			<p class="text-muted mt-5 mb-0">
				{{ event.localized_address_display }}
			</p>
		</div>
	</div>
	<!-- Date and location end -->

	<!-- Checkout type selector start -->
	{% if tier_types_count > 1 %}
		<div class="col-12" id="checkout-type-selector">
			<div class="content mb-0">
				<div class="btn-group d-flex" role="group" aria-label="Checkout type selector">
					{% if tiers_free|length > 0 %}
						<a href="{% url 'discovery:checkout_one' event.id event.slug 'free' %}#checkout-type-selector" class="btn btn-lg fw-bold antialiased fs-base {% if checkout_type == 'free' %}btn-primary{% endif %}">
							<i class="fa-light fa-party-horn me-5"></i> Free
						</a>
					{% endif %}
					{% if tiers_asset_ownership|length > 0 %}
						<a href="{% url 'discovery:checkout_one' event.id event.slug 'nft' %}#checkout-type-selector" class="btn btn-lg fw-bold antialiased fs-base {% if checkout_type == 'nft' %}btn-primary{% endif %}">
							<i class="fa-light fa-hexagon-image me-5"></i> NFTs
						</a>
					{% endif %}
				</div>
			</div>
		</div>
	{% endif %}
	<!-- Checkout type selector end -->



				<!--
				<div class="m-0" dangerouslySetInnerHTML={sanitizedEventDescription()} />
							{(document.getElementById("desc-cont")?.scrollHeight || -1) >
								(document.getElementById("desc-cont")?.clientHeight || 0) && (
								<div
									id="desc-read"
									class="position-absolute bottom-0 start-0 w-100 text-center pb-10"
									style={{
										paddingTop: "12rem",
										background:
											"linear-gradient(transparent, var(--base-content-bg-color))",
										borderBottom: "1px solid var(--border-color)",
									}}
								>
									<button
										type="button"
										class="btn btn-rounded"
										onClick={() => {
											document
												.getElementById("desc-cont")
												?.classList.remove("overflow-hidden");
											document.getElementById("desc-cont")?.classList.remove("max-h-250");
											document.getElementById("desc-read")?.classList.add("d-none");
										}}
									>
										Read More
									</button>
								</div>
							)}
						</div>
					</div>
				}

			-->

		<!--
				<div class="col-md-5">
					<div class="content pt-10 pt-md-30 my-0 position-md-sticky top-0 start-0">
						<div>
							{checkout?.expiration == null || checkout?.tx_status == "FULFILLED" ? (
								""
							) : (
								<CountdownTimer expiration={new Date(checkout?.expiration)} />
							)}
						</div>
						<div class="d-flex align-items-center">
							<div class="ws-25 flex-shrink-0">
								<i class="fa-light fa-calendars"></i>
							</div>
							<div class="fw-bold">
								Date
								{"  "}&mdash; {event?.timezone}
							</div>
						</div>
						<p class="text-muted mt-5 mb-0">
							<strong class="text-base">Start:</strong> {event?.start_date}
						</p>
						{event?.end_date && (
							<p class="text-muted mt-5 mb-0">
								<strong class="text-base">End:</strong> {event?.end_date}
							</p>
						)}
						<div class="d-flex align-items-center mt-15">
							<div class="ws-25 flex-shrink-0">
								<i class="fa-light fa-location-dot"></i>
							</div>
							<div class="fw-bold">Location</div>
						</div>
						<p class="text-muted mt-5 mb-0">{event?.localized_address_display}</p>
					</div>
				</div>
				<div class="col-12">
					<div class="content mt-20 mb-0">
						{tiersLoading ? (
							<></>
						) : isSomeTiersAvailable() ? (
							<>
								<div>
									<div
										class="alert alert-primary m-0 text-primary-dim-lm px-20 py-10 fw-bold rounded-2 d-flex align-items-center"
										role="alert"
									>
										<i class="fa-regular fa-check me-15"></i>
										<p class="m-0">
											Tickets available! Please select the tickets you want to purchase.
										</p>
									</div>
								</div>
							</>
						) : (
							<>
								{ticketTiers.length > 0 && (
									<div>
										<div
											class="alert alert-danger m-0 text-danger-dim-lm px-20 py-10 fw-bold rounded-2 d-flex align-items-center"
											role="alert"
										>
											<i class="fa-regular fa-times me-15"></i>
											<p class="m-0">
												Sorry! Tickets are not available for this event.
											</p>
										</div>
									</div>
								)}
							</>
						)}
					</div>
				</div>
		-->
</div>
{% endblock content %}

{% block extra_body %}
<script type="text/javascript">
	if (document.getElementById("desc-cont").scrollHeight > document.getElementById("desc-cont").clientHeight) {
		document.getElementById("desc-read").classList.remove("d-none");
	}
</script>
{% endblock extra_body %}