{% extends 'dashboard/base.html' %}
{% load static i18n get_chain_name %}

{% block title %}{{ tokengate.title }} - SocialPass {% endblock %}

{% block navbar_page_name_1 %}Ticket Gate Detail{% endblock %}
{% block navbar_page_name_2 %}Ticket Gate Detail{% endblock %}

{% block content %}
<div class="row">
	<div class="col-sm-10 col-md-8 mx-auto">
		<div class="card mb-4">
			<div class="card-header py-0">
				<div class="d-flex align-items-center py-3">
					<div class="pe-2">
						<h6 class="m-0">Ticket Gate Checkout</h6>
						<div class="text-muted text-xs mb-3">
							Please, confirm the information of the Ticket Gate before heading to checkout.

							All this information, with exception of the capacity may be edited later.
						</div>
					</div>
				</div>
			</div>
			<form class="card-body py-2" method="post">
				{% csrf_token %}
				<a href="{% url 'ticketgate_update' view.kwargs.team_pk tokengate.pk %}" style="float:right"  class="btn bg-gradient-primary btn-sm ms-auto my-0">Edit information</a>
				<input type="submit" class="btn bg-gradient-primary btn-sm ms-auto my-0" style="float:right; margin-right: 10px;" value="Procceed to Checkout" />
			</form>
			<div class="card-body py-2">
				<div>
					<h1 class="fw-bold fs-3">{{ tokengate.title }}</h1>
					<div class="text-muted text-xs mb-3">
						<div>
							Created: {{ tokengate.created }}
						</div>
						<div class="mt-1">
							Modified: {{ tokengate.modified }}
						</div>
					</div>
					{% if tokengate.description %}
					<p class="text-muted">{{ tokengate.description }}</p>
					{% else %}
					<p class="text-muted">Description not set.</p>
					{% endif %}
				</div>
				<div class="table-responsive p-0">
					<table class="table align-items-center mb-0">
						<tbody>
							<tr>
								<td class="align-middle fw-bold">
									Date
								</td>
								<td class="align-middle">
									{{ tokengate.date.date }}
								</td>
							</tr>
							<tr>
								<td class="align-middle fw-bold">
									Location
								</td>
								<td class="align-middle">
									{{ tokengate.location }}
								</td>
							</tr>
							<tr>
								<td class="align-middle fw-bold">
									Capacity
								</td>
								<td class="align-middle">
									{{ tokengate.capacity }}
								</td>
							</tr>
							<tr>
								<td class="align-middle fw-bold">
									Price
								</td>
								<td class="align-middle">
									{{ tokengate.capacity }} tickets x {{tokengate.pricing_rule.price_per_ticket}} $/ticket = ${{ tokengate.price }}
								</td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="my-3 mb-lg-4">
					<h5 class="fw-bold fs-5">Requirements</h5>
					<div class="text-muted text-xs mb-3">
						The following must be fulfilled in order to access this token gate.
					</div>
					{% if tokengate.requirements %}
					<pre class="bg-light px-4 rounded"><br />{% for item in tokengate.requirements %}Requirement {{ forloop.counter }}<br />-------------<br />{% for k, v in item.items %}<span class="text-primary fw-bold">{{ k }}</span>: {{ v }}<br />{% endfor %}<br />{% endfor %}</pre>
					{% else %}
					<pre class="bg-light p-3 rounded">No Requirements</pre>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}
