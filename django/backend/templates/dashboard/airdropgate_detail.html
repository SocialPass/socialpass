{% extends 'dashboard/base.html' %}
{% load static i18n get_chain_name %}

{% block title %}{{ tokengate.title }} - SocialPass {% endblock %}

{% block navbar_page_name_1 %}Airdrop Gate Detail{% endblock %}
{% block navbar_page_name_2 %}Airdrop Gate Detail{% endblock %}

{% block content %}
<div class="row">
	<div class="col-sm-10 col-md-8 mx-auto">
		<div class="card mb-4">
			<div class="card-header py-0">
				<div class="d-flex align-items-center py-3">
					<div class="pe-2">
						<h6 class="m-0">Airdrop Gate Detail</h6>
						<div class="text-muted text-xs mb-3">
							Details of a particular token gate.
						</div>
					</div>
					<a href="{% url 'airdropgate_update' view.kwargs.team_pk tokengate.pk %}" class="btn bg-gradient-primary btn-sm ms-auto my-0">Edit</a>
				</div>
			</div>
			<div class="card-body py-2">
				<div>
					<h1 class="fw-bold fs-3">{{ tokengate.title }}</h1>
					<div class="text-muted text-xs mb-3">
						<div>
							Created: {{ tokengate.created }}
						</div>
						<div class="mt-1">
							Modified: {{ tokengate.modified }}
						</div>
					</div>
					{% if tokengate.description %}
					<p class="text-muted">{{ tokengate.description }}</p>
					{% else %}
					<p class="text-muted">Description not set.</p>
					{% endif %}
				</div>
				<div class="table-responsive p-0">
					<table class="table align-items-center mb-0">
						<tbody>
							<tr>
								<td class="align-middle fw-bold">
									Chain
								</td>
								<td class="align-middle">
									{% get_chain_name tokengate.chain %}
								</td>
							</tr>
							<tr>
								<td class="align-middle fw-bold">
									Asset Type
								</td>
								<td class="align-middle">
									{{ tokengate.asset_type }}
								</td>
							</tr>
							<tr>
								<td class="align-middle fw-bold">
									Asset Address
								</td>
								<td class="align-middle">
									{{ tokengate.asset_address }}
								</td>
							</tr>
							<tr>
								<td class="align-middle fw-bold">
									Amount (per person)
								</td>
								<td class="align-middle">
									{{ tokengate.amount_per_person }}
								</td>
							</tr>
							<tr>
								<td class="align-middle fw-bold">
									Total Amount
								</td>
								<td class="align-middle">
									{{ tokengate.total_amount }}
								</td>
							</tr>
							<tr>
								<td class="align-middle fw-bold">
									Start Date
								</td>
								<td class="align-middle">
									{{ tokengate.start_date }}
								</td>
							</tr>
							<tr>
								<td class="align-middle fw-bold">
									End Date
								</td>
								<td class="align-middle">
									{{ tokengate.end_date }}
								</td>
							</tr>
						</tbody>
						<tbody>
							{% for tokengate in tokengates %}
							<tr>
								<td class="align-middle">
									<div class="ps-3">
										<h6 class="mb-0 text-sm">{{ tokengate.title }}</h6>
										<p class="text-xs text-secondary mb-0">{% get_chain_name tokengate.chain %}</p>
									</div>
								</td>
								<td class="align-middle">
									<p class="text-xs font-weight-bold mb-0">{{ tokengate.asset_type }}</p>
									<p class="text-xs text-secondary mb-0">{{ tokengate.asset_address }}</p>
								</td>
								<td class="align-middle">
									<p class="text-xs text-secondary mb-0">
										<span>Per person: </span>
										<strong>{{ tokengate.amount_per_person }}</strong>
									</p>
									<p class="text-xs text-secondary mb-0">
										<span>Total: </span>
										<strong>{{ tokengate.total_amount }}</strong>
									</p>
								</td>
								<td class="align-middle">
									<span class="text-secondary text-xs font-weight-bold">
									{{ tokengate.start_date.date }}
									</span>
								</td>
								<td class="align-middle">
									<span class="text-secondary text-xs font-weight-bold">
									{{ tokengate.end_date.date }}
									</span>
								</td>
								<td class="align-middle">
									<a href="{% url 'airdropgate_detail' view.kwargs.team_pk tokengate.id %}" class="btn btn-link btn-sm m-0 me-3 px-0">
									Details
									</a>
									<a href="{% url 'airdropgate_update' view.kwargs.team_pk tokengate.id %}" class="btn btn-link btn-sm m-0 px-0">
									Edit
									</a>
								</td>
							</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
				<div class="my-3 mb-lg-4">
					<h5 class="fw-bold fs-5">Requirements</h5>
					<div class="text-muted text-xs mb-3">
						The following must be fulfilled in order to access this token gate.
					</div>
					{% if tokengate.requirements %}
					<pre class="bg-light px-4 rounded"><br />{% for item in tokengate.requirements %}Requirement {{ forloop.counter }}<br />-------------<br />{% for k, v in item.items %}<span class="text-primary fw-bold">{{ k }}</span>: {{ v }}<br />{% endfor %}<br />{% endfor %}</pre>
					{% else %}
					<pre class="bg-light p-3 rounded">No Requirements</pre>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}